"use client";

import Image from "next/image";
import React, { useEffect, useState, useRef } from "react";

const socialLinks = [
  {
    name: "instagram",
    url: "https://www.linkedin.com/in/uzairqureshi0803/",
    svg: (
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M16.5425 0C18.2299 0.00449989 19.0864 0.0134997 19.8259 0.0344992L20.1169 0.0449989C20.4529 0.0569986 20.7843 0.0719982 21.1848 0.0899977C22.7808 0.164996 23.8698 0.41699 24.8253 0.787481C25.8152 1.16847 26.6492 1.68446 27.4832 2.51694C28.2462 3.26652 28.8364 4.17361 29.2126 5.17487C29.5831 6.13035 29.8351 7.21932 29.9101 8.81679C29.9281 9.21578 29.9431 9.54727 29.9551 9.88476L29.9641 10.1758C29.9866 10.9137 29.9956 11.7702 29.9986 13.4577L30.0001 14.5766V16.5416C30.0038 17.6357 29.9923 18.7298 29.9656 19.8235L29.9566 20.1145C29.9446 20.452 29.9296 20.7835 29.9116 21.1825C29.8366 22.7799 29.5816 23.8674 29.2126 24.8244C28.8364 25.8257 28.2462 26.7328 27.4832 27.4823C26.7336 28.2454 25.8265 28.8356 24.8253 29.2118C23.8698 29.5823 22.7808 29.8343 21.1848 29.9093L20.1169 29.9543L19.8259 29.9633C19.0864 29.9843 18.2299 29.9948 16.5425 29.9978L15.4235 29.9993H13.46C12.3654 30.0031 11.2709 29.9916 10.1766 29.9648L9.88561 29.9558C9.52954 29.9423 9.17354 29.9268 8.81764 29.9093C7.22168 29.8343 6.1327 29.5823 5.17573 29.2118C4.175 28.8354 3.26844 28.2452 2.51929 27.4823C1.75573 26.7329 1.16499 25.8258 0.788334 24.8244C0.417843 23.8689 0.165849 22.7799 0.0908509 21.1825L0.045852 20.1145L0.0383524 19.8235C0.0107021 18.7298 -0.0017989 17.6357 0.000853175 16.5416V13.4577C-0.00329857 12.3636 0.00770234 11.2695 0.0338525 10.1758L0.0443522 9.88476C0.0563519 9.54727 0.0713515 9.21578 0.0893511 8.81679C0.164349 7.21932 0.416343 6.13185 0.786834 5.17487C1.16437 4.1732 1.75615 3.26608 2.52079 2.51694C3.2695 1.75428 4.17553 1.16408 5.17573 0.787481C6.1327 0.41699 7.22018 0.164996 8.81764 0.0899977C9.21663 0.0719982 9.54962 0.0569986 9.88561 0.0449989L10.1766 0.035999C11.2704 0.00934883 12.3644 -0.00215199 13.4585 0.00149985L16.5425 0ZM15.0005 7.49982C13.0114 7.49982 11.1038 8.28998 9.69732 9.69646C8.29083 11.103 7.50067 13.0106 7.50067 14.9996C7.50067 16.9887 8.29083 18.8963 9.69732 20.3028C11.1038 21.7093 13.0114 22.4995 15.0005 22.4995C16.9896 22.4995 18.8972 21.7093 20.3037 20.3028C21.7101 18.8963 22.5003 16.9887 22.5003 14.9996C22.5003 13.0106 21.7101 11.103 20.3037 9.69646C18.8972 8.28998 16.9896 7.49982 15.0005 7.49982ZM15.0005 10.4997C15.5914 10.4996 16.1766 10.6159 16.7226 10.842C17.2686 11.068 17.7647 11.3994 18.1826 11.8172C18.6005 12.235 18.9321 12.731 19.1583 13.2769C19.3845 13.8228 19.501 14.408 19.5011 14.9989C19.5012 15.5898 19.3849 16.175 19.1589 16.721C18.9328 17.267 18.6015 17.7631 18.1837 18.181C17.7659 18.5989 17.2699 18.9305 16.724 19.1567C16.1781 19.3829 15.5929 19.4994 15.002 19.4995C13.8085 19.4995 12.664 19.0254 11.8201 18.1815C10.9762 17.3376 10.5021 16.1931 10.5021 14.9996C10.5021 13.8062 10.9762 12.6616 11.8201 11.8177C12.664 10.9738 13.8085 10.4997 15.002 10.4997M22.8768 5.24987C22.3795 5.24987 21.9026 5.44741 21.551 5.79903C21.1994 6.15066 21.0018 6.62756 21.0018 7.12483C21.0018 7.6221 21.1994 8.099 21.551 8.45062C21.9026 8.80224 22.3795 8.99978 22.8768 8.99978C23.3741 8.99978 23.851 8.80224 24.2026 8.45062C24.5542 8.099 24.7518 7.6221 24.7518 7.12483C24.7518 6.62756 24.5542 6.15066 24.2026 5.79903C23.851 5.44741 23.3741 5.24987 22.8768 5.24987Z"
          className="  fill-[#171717] dark:fill-white"
          fill="currentColor"
        />
      </svg>
    ),
    color: "#03E78B",
  },
  {
    name: "LinkedIn",
    url: "https://www.linkedin.com/in/uzairqureshi0803/",
    svg: (
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M26.6667 0C27.5507 0 28.3986 0.351189 29.0237 0.976311C29.6488 1.60143 30 2.44928 30 3.33333V26.6667C30 27.5507 29.6488 28.3986 29.0237 29.0237C28.3986 29.6488 27.5507 30 26.6667 30H3.33333C2.44928 30 1.60143 29.6488 0.976311 29.0237C0.351189 28.3986 0 27.5507 0 26.6667V3.33333C0 2.44928 0.351189 1.60143 0.976311 0.976311C1.60143 0.351189 2.44928 0 3.33333 0H26.6667ZM25.8333 25.8333V17C25.8333 15.559 25.2609 14.177 24.2419 13.1581C23.223 12.1391 21.841 11.5667 20.4 11.5667C18.9833 11.5667 17.3333 12.4333 16.5333 13.7333V11.8833H11.8833V25.8333H16.5333V17.6167C16.5333 16.3333 17.5667 15.2833 18.85 15.2833C19.4688 15.2833 20.0623 15.5292 20.4999 15.9668C20.9375 16.4043 21.1833 16.9978 21.1833 17.6167V25.8333H25.8333ZM6.46667 9.26667C7.20927 9.26667 7.92146 8.97167 8.44657 8.44657C8.97167 7.92146 9.26667 7.20927 9.26667 6.46667C9.26667 4.91667 8.01667 3.65 6.46667 3.65C5.71964 3.65 5.00321 3.94675 4.47498 4.47498C3.94675 5.00321 3.65 5.71964 3.65 6.46667C3.65 8.01667 4.91667 9.26667 6.46667 9.26667ZM8.78333 25.8333V11.8833H4.16667V25.8333H8.78333Z"
          className="  fill-[#171717] dark:fill-white"
          fill="currentColor"
        />
      </svg>
    ),
    color: "#49E670",
  },
  {
    name: "Whatsapp",
    url: "https://wa.me/9890562214",
    svg: (
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M15 0C23.2845 0 30 6.7155 30 15C30 23.2845 23.2845 30 15 30C12.3491 30.0045 9.74489 29.303 7.45502 27.9675L0.00602318 30L2.03402 22.548C0.69746 20.2574 -0.00462244 17.652 2.2903e-05 15C2.2903e-05 6.7155 6.71552 0 15 0ZM9.88802 7.94999L9.58801 7.96199C9.39405 7.97536 9.20454 8.0263 9.03002 8.11199C8.86738 8.20426 8.71886 8.31944 8.58902 8.45399C8.40902 8.62349 8.30702 8.77049 8.19752 8.91299C7.6427 9.63435 7.34398 10.52 7.34852 11.43C7.35152 12.165 7.54352 12.8805 7.84352 13.5495C8.45702 14.9025 9.46652 16.335 10.7985 17.6625C11.1195 17.982 11.4345 18.303 11.7735 18.6015C13.4287 20.0586 15.4009 21.1094 17.5335 21.6705L18.3855 21.801C18.663 21.816 18.9405 21.795 19.2195 21.7815C19.6563 21.7584 20.0827 21.6402 20.469 21.435C20.6653 21.3335 20.857 21.2234 21.0435 21.105C21.0435 21.105 21.107 21.062 21.231 20.97C21.4335 20.82 21.558 20.7135 21.726 20.538C21.852 20.408 21.957 20.257 22.041 20.085C22.158 19.8405 22.275 19.374 22.323 18.9855C22.359 18.6885 22.3485 18.5265 22.344 18.426C22.338 18.2655 22.2045 18.099 22.059 18.0285L21.186 17.637C21.186 17.637 19.881 17.0685 19.083 16.7055C18.9995 16.6691 18.91 16.6483 18.819 16.644C18.7164 16.6332 18.6126 16.6447 18.5148 16.6776C18.417 16.7104 18.3273 16.764 18.252 16.8345C18.2445 16.8315 18.144 16.917 17.0595 18.231C16.9973 18.3146 16.9115 18.3778 16.8132 18.4126C16.7149 18.4473 16.6085 18.452 16.5075 18.426C16.4097 18.3999 16.314 18.3668 16.221 18.327C16.035 18.249 15.9705 18.219 15.843 18.165C14.9818 17.7898 14.1847 17.2822 13.4805 16.6605C13.2915 16.4955 13.116 16.3155 12.936 16.1415C12.3459 15.5763 11.8316 14.937 11.406 14.2395L11.3175 14.097C11.2549 14.0007 11.2036 13.8975 11.1645 13.7895C11.1075 13.569 11.256 13.392 11.256 13.392C11.256 13.392 11.6205 12.993 11.79 12.777C11.955 12.567 12.0945 12.363 12.1845 12.2175C12.3615 11.9325 12.417 11.64 12.324 11.4135C11.904 10.3875 11.47 9.36699 11.022 8.35199C10.9335 8.15099 10.671 8.00699 10.4325 7.97849C10.3515 7.96849 10.2705 7.96049 10.1895 7.95449C9.98811 7.94294 9.78615 7.94495 9.58502 7.96049L9.88802 7.94999Z"
          className="  fill-[#171717] dark:fill-white"
          fill="currentColor"
        />
      </svg>
    ),
    color: "#FF485F",
  },
  {
    name: "Email",
    url: "mailto:uq0803@gmail.com",
    svg: (
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M18.375 0H5.625C2.5184 0 0 2.5184 0 5.625V18.375C0 21.4816 2.5184 24 5.625 24H18.375C21.4816 24 24 21.4816 24 18.375V5.625C24 2.5184 21.4816 0 18.375 0Z"
          fill="#111111"
        />
        <path
          d="M3.90338 19.0335H6.88631V11.7892L2.625 8.59326V17.7552C2.625 18.4625 3.19819 19.0335 3.90338 19.0335Z"
          fill="#4285F4"
        />
        <path
          d="M17.1125 19.0343H20.0956C20.8029 19.0343 21.374 18.4612 21.374 17.7559V8.59399L17.1125 11.7899"
          fill="#34A853"
        />
        <path
          d="M17.1125 6.25012V11.7899L21.374 8.59396V6.88921C21.374 5.30831 19.5693 4.407 18.3058 5.35518"
          fill="#FBBC04"
        />
        <path
          d="M6.88745 11.79V6.25034L12.001 10.0856L17.1146 6.25024V11.79L12.001 15.6253"
          fill="#EA4335"
        />
        <path
          d="M2.625 6.88931V8.59377L6.88631 11.7898V6.25012L5.69316 5.35518C4.42753 4.40699 2.625 5.30831 2.625 6.88931Z"
          fill="#C5221F"
        />
      </svg>
    ),
    color: "#f6b363",
  },
];

const Menu: React.FC = () => {
  const [isActive, setIsActive] = useState(false);
  const menuRef = useRef<HTMLDivElement | null>(null);
  const toggleMenu = () => {
    setIsActive(!isActive);
  };
  // Close the menu when clicking outside
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        setIsActive(false);
        console.log("Clicked outside");
      }
    };

    if (isActive) {
      document.addEventListener("mousedown", handleClickOutside);
    } else {
      document.removeEventListener("mousedown", handleClickOutside);
    }

    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [isActive]);

  return (
    <div
      style={{
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        background: "#2f363e",
      }}
      ref={menuRef}
    >
      <div
        className="toggle shadow-[0px_0px_10px_2.616px_rgba(0,0,0,0.15)]"
        onClick={toggleMenu}
        style={{
          position: "absolute",
          width: "70px",
          height: "70px",
          background: "#fff",
          border: "1.5px solid #fff",
          borderRadius: "50%",
          color: "#fff",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          textAlign: "center",
          cursor: "pointer",
          zIndex: 1111,
          fontSize: "2em",
          transition: "transform 1.2s ease-in-out",
        }}
      >
        <div>
          {isActive ? (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 30 30"
              width="30px"
              height="30px"
            >
              <path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z" />
            </svg>
          ) : (
            <div>
              <Image
                loading="eager"
                src={"/assets/animatedIcons/chat.gif"}
                height={50}
                width={50}
                alt="chat gif"
              />
            </div>
          )}
        </div>
      </div>

      <ul
        className={`menu ${isActive ? "active" : ""}`}
        style={{
          position: "relative",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
        }}
      >
        {socialLinks.map((link, index) => (
          <li
            key={index}
            className=" rounded-[100px]"
            style={
              {
                "--i": index,
                boxShadow: "rgba(100, 100, 111, 0.2) 0px 7px 10px 0px",
              } as React.CSSProperties
            }
          >
            <a
              href={link.url}
              target="_blank"
              rel="noopener noreferrer"
              aria-label={`Follow us on ${link.name}`}
            >
              {link.svg}
            </a>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default Menu;
